# F1.3: Label Model & Repository

## Objective
Create Label model and repository for organizing reminders.

## Dependencies
- F0.2 (SQLDelight setup)
- F0.3 (Koin DI setup)

## Requirements
- [ ] `Label` data class in domain layer
- [ ] SQLDelight table for labels
- [ ] `LabelRepository` interface and implementation
- [ ] CRUD operations for labels
- [ ] Labels linked to reminders via foreign key
- [ ] Unit tests

## SQLDelight Schema

### Label.sq
```sql
CREATE TABLE Label (
    id TEXT NOT NULL PRIMARY KEY,
    name TEXT NOT NULL,
    color TEXT NOT NULL,
    icon TEXT,
    createdAt INTEGER NOT NULL,
    updatedAt INTEGER NOT NULL
);

selectAll:
SELECT * FROM Label ORDER BY name ASC;

selectById:
SELECT * FROM Label WHERE id = ?;

insert:
INSERT INTO Label(id, name, color, icon, createdAt, updatedAt)
VALUES (?, ?, ?, ?, ?, ?);

update:
UPDATE Label SET name = ?, color = ?, icon = ?, updatedAt = ? WHERE id = ?;

delete:
DELETE FROM Label WHERE id = ?;
```

## Domain Model

### domain/model/Label.kt
```kotlin
package com.cooleymd.reminders.domain.model

import kotlinx.datetime.Instant

data class Label(
    val id: String,
    val name: String,
    val color: String, // hex color code e.g., "#FF5722"
    val icon: String? = null, // optional icon name
    val createdAt: Instant,
    val updatedAt: Instant
)
```

## Repository Interface

### domain/repository/LabelRepository.kt
```kotlin
package com.cooleymd.reminders.domain.repository

import com.cooleymd.reminders.domain.model.Label
import kotlinx.coroutines.flow.Flow

interface LabelRepository {
    fun getAllLabels(): Flow<List<Label>>
    suspend fun getLabelById(id: String): Label?
    suspend fun insertLabel(label: Label)
    suspend fun updateLabel(label: Label)
    suspend fun deleteLabel(id: String)
}
```

## Repository Implementation

### data/repository/LabelRepositoryImpl.kt
```kotlin
class LabelRepositoryImpl(
    private val database: RemindersDatabase
) : LabelRepository {
    // Similar pattern to ReminderRepositoryImpl
}
```

## Koin Registration

Add to AppModule.kt:
```kotlin
single<LabelRepository> { LabelRepositoryImpl(get()) }
```

## Tests

- Test CRUD operations
- Test flow emissions on data changes

## Verification
```bash
./gradlew generateCommonMainRemindersDatabase
./gradlew build
./gradlew :composeApp:testDebugUnitTest --tests "*LabelRepository*"
```

## Files to Create
- `composeApp/src/commonMain/sqldelight/.../Label.sq`
- `composeApp/src/commonMain/kotlin/.../domain/model/Label.kt`
- `composeApp/src/commonMain/kotlin/.../domain/repository/LabelRepository.kt`
- `composeApp/src/commonMain/kotlin/.../data/repository/LabelRepositoryImpl.kt`
- `composeApp/src/commonTest/kotlin/.../LabelRepositoryTest.kt`
- Update `di/AppModule.kt`
