# F0.3: Koin DI Setup

## Objective
Add Koin for dependency injection across shared and platform code.

## Requirements
- [ ] Koin dependencies added to version catalog
- [ ] Shared Koin module created with basic structure
- [ ] Platform-specific modules for Android and iOS
- [ ] Koin initialized on app start for both platforms
- [ ] Basic injection working (verify with a test dependency)

## Dependencies to Add

### gradle/libs.versions.toml
```toml
[versions]
koin = "3.5.3"
koin-compose = "1.1.2"

[libraries]
koin-core = { module = "io.insert-koin:koin-core", version.ref = "koin" }
koin-android = { module = "io.insert-koin:koin-android", version.ref = "koin" }
koin-compose = { module = "io.insert-koin:koin-compose", version.ref = "koin-compose" }
koin-test = { module = "io.insert-koin:koin-test", version.ref = "koin" }
```

## Module Structure

### commonMain - di/AppModule.kt
```kotlin
package com.cooleymd.reminders.di

import org.koin.core.module.Module
import org.koin.dsl.module

val appModule = module {
    // Database
    single { createDatabase(get()) }

    // Repositories (to be added in later features)

    // Use Cases (to be added in later features)
}

expect fun platformModule(): Module
```

### androidMain - di/PlatformModule.kt
```kotlin
package com.cooleymd.reminders.di

import org.koin.android.ext.koin.androidContext
import org.koin.dsl.module

actual fun platformModule() = module {
    single { androidContext() }
    // Android-specific dependencies
}
```

### iosMain - di/PlatformModule.kt
```kotlin
package com.cooleymd.reminders.di

import org.koin.dsl.module

actual fun platformModule() = module {
    // iOS-specific dependencies
}
```

## Koin Initialization

### Android - MainActivity or Application
```kotlin
class RemindersApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        startKoin {
            androidContext(this@RemindersApplication)
            modules(appModule, platformModule())
        }
    }
}
```

### iOS - via KoinHelper.kt in iosMain
```kotlin
fun initKoin() {
    startKoin {
        modules(appModule, platformModule())
    }
}
```

Called from Swift:
```swift
KoinHelperKt.doInitKoin()
```

## Verification
```bash
./gradlew build
./gradlew :composeApp:testDebugUnitTest
```

## Files to Create/Modify
- `gradle/libs.versions.toml` - add koin dependencies
- `composeApp/build.gradle.kts` - add koin dependencies
- `composeApp/src/commonMain/kotlin/.../di/AppModule.kt`
- `composeApp/src/androidMain/kotlin/.../di/PlatformModule.kt`
- `composeApp/src/iosMain/kotlin/.../di/PlatformModule.kt`
- `composeApp/src/iosMain/kotlin/.../KoinHelper.kt`
- `composeApp/src/androidMain/kotlin/.../RemindersApplication.kt`
- `iosApp/iosApp/iOSApp.swift` - call initKoin
