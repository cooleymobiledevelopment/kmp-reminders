# F2.4: Android Reminder Detail & Actions

## Objective
Add swipe actions and quick snooze to reminder cards.

## Dependencies
- F2.2 (Home screen)
- F1.5 (Snooze/Complete use cases)

## Requirements
- [ ] Swipe left to delete (with confirmation)
- [ ] Swipe right to complete
- [ ] Quick snooze presets (5m, 15m, 30m, 1h)
- [ ] Long press context menu
- [ ] Label assignment from card

## Updated Home ViewModel

Add action handlers to HomeViewModel:
```kotlin
fun onCompleteReminder(id: String) {
    viewModelScope.launch {
        completeReminderUseCase(id)
    }
}

fun onSnoozeReminder(id: String, duration: Duration) {
    viewModelScope.launch {
        snoozeReminderUseCase(id, duration)
    }
}

fun onDeleteReminder(id: String) {
    viewModelScope.launch {
        deleteReminderUseCase(id)
    }
}
```

## Swipe Actions

### presentation/home/SwipeableReminderCard.kt
```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun SwipeableReminderCard(
    reminder: Reminder,
    onClick: () -> Unit,
    onComplete: () -> Unit,
    onDelete: () -> Unit,
    onSnooze: (Duration) -> Unit
) {
    var showSnoozeMenu by remember { mutableStateOf(false) }
    var showDeleteConfirm by remember { mutableStateOf(false) }

    val dismissState = rememberSwipeToDismissBoxState(
        confirmValueChange = { dismissValue ->
            when (dismissValue) {
                SwipeToDismissBoxValue.StartToEnd -> {
                    onComplete()
                    true
                }
                SwipeToDismissBoxValue.EndToStart -> {
                    showDeleteConfirm = true
                    false // Don't dismiss yet
                }
                else -> false
            }
        }
    )

    SwipeToDismissBox(
        state = dismissState,
        backgroundContent = {
            SwipeBackground(dismissState.targetValue)
        }
    ) {
        ReminderCard(
            reminder = reminder,
            onClick = onClick,
            onLongPress = { showSnoozeMenu = true }
        )
    }

    // Snooze dropdown
    DropdownMenu(
        expanded = showSnoozeMenu,
        onDismissRequest = { showSnoozeMenu = false }
    ) {
        listOf(
            "5 minutes" to 5.minutes,
            "15 minutes" to 15.minutes,
            "30 minutes" to 30.minutes,
            "1 hour" to 1.hours
        ).forEach { (label, duration) ->
            DropdownMenuItem(
                text = { Text("Snooze $label") },
                onClick = {
                    onSnooze(duration)
                    showSnoozeMenu = false
                }
            )
        }
    }

    // Delete confirmation
    if (showDeleteConfirm) {
        AlertDialog(
            onDismissRequest = { showDeleteConfirm = false },
            title = { Text("Delete Reminder") },
            text = { Text("Are you sure you want to delete '${reminder.title}'?") },
            confirmButton = {
                TextButton(onClick = {
                    onDelete()
                    showDeleteConfirm = false
                }) {
                    Text("Delete")
                }
            },
            dismissButton = {
                TextButton(onClick = { showDeleteConfirm = false }) {
                    Text("Cancel")
                }
            }
        )
    }
}
```

## Swipe Background

### presentation/home/SwipeBackground.kt
```kotlin
@Composable
fun SwipeBackground(dismissValue: SwipeToDismissBoxValue) {
    val color by animateColorAsState(
        when (dismissValue) {
            SwipeToDismissBoxValue.StartToEnd -> Color.Green.copy(alpha = 0.8f)
            SwipeToDismissBoxValue.EndToStart -> Color.Red.copy(alpha = 0.8f)
            else -> Color.Transparent
        }
    )

    Box(
        modifier = Modifier
            .fillMaxSize()
            .background(color)
            .padding(horizontal = 20.dp),
        contentAlignment = when (dismissValue) {
            SwipeToDismissBoxValue.StartToEnd -> Alignment.CenterStart
            else -> Alignment.CenterEnd
        }
    ) {
        Icon(
            imageVector = when (dismissValue) {
                SwipeToDismissBoxValue.StartToEnd -> Icons.Default.Check
                else -> Icons.Default.Delete
            },
            contentDescription = null,
            tint = Color.White
        )
    }
}
```

## Updated Reminder List

Update ReminderList to use SwipeableReminderCard:
```kotlin
items(reminders, key = { it.id }) { reminder ->
    SwipeableReminderCard(
        reminder = reminder,
        onClick = { onReminderClick(reminder.id) },
        onComplete = { onComplete(reminder.id) },
        onDelete = { onDelete(reminder.id) },
        onSnooze = { duration -> onSnooze(reminder.id, duration) }
    )
}
```

## Verification
```bash
./gradlew :composeApp:installDebug
# Swipe right completes reminder
# Swipe left shows delete confirmation
# Long press shows snooze options
```

## Files to Create/Modify
- `composeApp/src/androidMain/kotlin/.../presentation/home/SwipeableReminderCard.kt`
- `composeApp/src/androidMain/kotlin/.../presentation/home/SwipeBackground.kt`
- Update `HomeViewModel.kt` with action handlers
- Update `ReminderList.kt` to use swipeable cards
- Update `HomeScreen.kt` to pass action handlers
